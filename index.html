<!DOCTYPE html>
<html>
<head>
    <title>–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å / –ü—Ä–∏—ë–º–Ω–∏–∫</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; background: #f5f5f5; }
        .container { max-width: 500px; margin: 0 auto; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        h2 { color: #333; margin-bottom: 25px; }
        .role-btn { 
            display: block; 
            width: 100%; 
            padding: 25px; 
            margin: 15px 0; 
            font-size: 20px; 
            border: none; 
            border-radius: 10px; 
            cursor: pointer;
            color: white;
            font-weight: bold;
            transition: transform 0.2s;
        }
        .role-btn:hover { transform: scale(1.02); }
        #senderBtn { background: linear-gradient(135deg, #4CAF50, #2E7D32); }
        #receiverBtn { background: linear-gradient(135deg, #2196F3, #0D47A1); }
        .hidden { display: none; }
        #signalBtn { 
            font-size: 28px; 
            padding: 30px; 
            background: linear-gradient(135deg, #FF5722, #D84315);
            color: white;
            border: none;
            border-radius: 50%;
            width: 150px;
            height: 150px;
            margin: 30px auto;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(255,87,34,0.3);
        }
        #signalBtn:disabled { background: #cccccc; }
        #status { 
            margin: 20px; 
            padding: 15px; 
            border-radius: 10px;
            font-size: 16px;
        }
        .sender-status { background: #E8F5E9; border-left: 5px solid #4CAF50; }
        .receiver-status { background: #E3F2FD; border-left: 5px solid #2196F3; }
        audio { width: 100%; margin-top: 20px; }
        .room-code { 
            padding: 15px; 
            font-size: 24px; 
            font-weight: bold; 
            background: #f8f8f8; 
            border-radius: 10px;
            margin: 20px 0;
            letter-spacing: 3px;
        }
    </style>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
</head>
<body>
    <div class="container">
        <h2>üîä –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –∏ –ü—Ä–∏—ë–º–Ω–∏–∫</h2>
        
        <div id="roleSelection">
            <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å:</h3>
            <button class="role-btn" onclick="selectRole('sender')" id="senderBtn">
                üì§ –û–¢–ü–†–ê–í–ò–¢–ï–õ–¨<br>
                <small>(–ö–Ω–æ–ø–∫–∞ + –º–∏–∫—Ä–æ—Ñ–æ–Ω)</small>
            </button>
            
            <button class="role-btn" onclick="selectRole('receiver')" id="receiverBtn">
                üì• –ü–†–ò–Å–ú–ù–ò–ö<br>
                <small>(–¢–æ–ª—å–∫–æ –¥–∏–Ω–∞–º–∏–∫)</small>
            </button>
        </div>
        
        <div id="roomSelection" class="hidden">
            <h3>–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã:</h3>
            <input type="text" id="roomCodeInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 1234" maxlength="10" style="padding: 15px; font-size: 18px; width: 80%;">
            <br><br>
            <button onclick="joinRoom()" style="padding: 15px 30px; font-size: 18px; background: #666; color: white; border: none; border-radius: 8px;">
                –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
            </button>
        </div>
        
        <!-- –û–¢–ü–†–ê–í–ò–¢–ï–õ–¨ -->
        <div id="senderInterface" class="hidden">
            <div class="room-code">–ö–æ–º–Ω–∞—Ç–∞: <span id="senderRoomCode">-</span></div>
            <div id="status" class="sender-status">‚úÖ –ü–æ–¥–∫–ª—é—á—ë–Ω –∫–∞–∫ –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å</div>
            
            <button id="signalBtn" onclick="startRecording()">
                üé§<br>–ì–æ–≤–æ—Ä–∏—Ç—å
            </button>
            
            <p>–ù–∞–∂–º–∏—Ç–µ –∏ —É–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –∑–∞–ø–∏—Å–∏ –≥–æ–ª–æ—Å–∞</p>
            
            <div id="recordingStatus" style="color: #FF5722; font-weight: bold; margin: 20px;"></div>
        </div>
        
        <!-- –ü–†–ò–Å–ú–ù–ò–ö -->
        <div id="receiverInterface" class="hidden">
            <div class="room-code">–ö–æ–º–Ω–∞—Ç–∞: <span id="receiverRoomCode">-</span></div>
            <div id="status" class="receiver-status">‚úÖ –ü–æ–¥–∫–ª—é—á—ë–Ω –∫–∞–∫ –ü—Ä–∏—ë–º–Ω–∏–∫</div>
            
            <h3>üì¢ –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:</h3>
            <audio id="receiverAudio" controls autoplay></audio>
            <p id="messageStatus">–û–∂–∏–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π...</p>
            
            <div style="margin-top: 30px; padding: 15px; background: #FFF3E0; border-radius: 10px;">
                <strong>–†–µ–∂–∏–º:</strong> –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ<br>
                <small>–ú–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è</small>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
